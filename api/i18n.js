const translations = {
  indonesia: {
    'Account is inactive. Please contact an administrator.': 'Akun tidak aktif. Silakan hubungi administrator.',
    'Account setup required. Please complete setup before continuing.':
      'Akun perlu disiapkan. Silakan selesaikan setup sebelum melanjutkan.',
    'Click the link below to reset your password:': 'Klik tautan berikut untuk mereset password Anda:',
    'Existing good': 'Barang tersedia',
    'Failed to fetch data': 'Gagal mengambil data',
    'Google client ID is not configured': 'Google client ID belum dikonfigurasi',
    'Google credential is required': 'Kredensial Google wajib diisi',
    'Invalid Google token': 'Token Google tidak valid',
    'Invalid Google token audience': 'Audiens token Google tidak valid',
    'Internal server error': 'Terjadi kesalahan pada server',
    'Missing required fields': 'Field wajib belum diisi',
    'No user found for this Google account': 'Tidak ditemukan pengguna untuk akun Google ini',
    'Reset Password - RGI NexaProc': 'Reset Password - RGI NexaProc',
    'Table not found': 'Tabel tidak ditemukan',
    'User completed initial setup': 'Pengguna menyelesaikan setup awal',
    'User logged in': 'Pengguna masuk',
    'User logged in with Google': 'Pengguna masuk dengan Google',
    'User logged out': 'Pengguna keluar',
    'This link is valid for 1 hour.': 'Tautan ini berlaku selama 1 jam.',
    'Activity log error': 'Kesalahan log aktivitas',
    'Attachment is required.': 'Lampiran wajib diisi.',
    'Authentication failed.': 'Autentikasi gagal.',
    'Email is required': 'Email wajib diisi',
    'Email is required.': 'Email wajib diisi.',
    'Email/username and password are required': 'Email/username dan password wajib diisi',
    'Failed to complete setup': 'Gagal menyelesaikan setup',
    'Failed to create record': 'Gagal membuat data',
    'Failed to delete record': 'Gagal menghapus data',
    'Failed to fetch record': 'Gagal mengambil data',
    'Failed to load suppliers': 'Gagal memuat supplier',
    'Failed to process reset request': 'Gagal memproses permintaan reset',
    'Failed to login with Google': 'Gagal masuk dengan Google',
    'Failed to reset password': 'Gagal mereset password',
    'Failed to save record': 'Gagal menyimpan data',
    'Google account has no email': 'Akun Google tidak memiliki email',
    'If the email exists, a reset link has been sent.':
      'Jika email terdaftar, tautan reset password sudah dikirim.',
    'Invalid credentials': 'Kredensial tidak valid',
    'Invalid file data': 'Data file tidak valid',
    'Invalid file type. Only PDF, DOC, or DOCX are allowed.':
      'Jenis file tidak valid. Hanya PDF, DOC, atau DOCX yang diperbolehkan.',
    'Invalid password': 'Password tidak valid',
    'Invalid reset token': 'Token reset tidak valid',
    'Invalid token': 'Token tidak valid',
    'Missing required fields.': 'Field wajib belum diisi.',
    'No records found': 'Tidak ada data ditemukan',
    'Password reset token is invalid or expired': 'Token reset tidak valid atau kedaluwarsa',
    'Password reset token is missing': 'Token reset tidak ada',
    'Password reset token is required': 'Token reset wajib diisi',
    'Password reset token is invalid or expired.':
      'Token reset tidak valid atau kedaluwarsa.',
    'Password reset token is invalid or expired or has been used.':
      'Token reset tidak valid, kedaluwarsa, atau sudah digunakan.',
    'Password reset token is invalid or has expired': 'Token reset tidak valid atau kedaluwarsa',
    'Password reset token is required and password must be provided':
      'Token reset dan password wajib diisi',
    'Password reset token is required.': 'Token reset wajib diisi.',
    'Password reset token not found': 'Token reset tidak ditemukan',
    'Password reset token was not found': 'Token reset tidak ditemukan',
    'Password reset token was not found.': 'Token reset tidak ditemukan.',
    'Password reset token was not provided': 'Token reset belum diberikan',
    'Password reset token was not provided.': 'Token reset belum diberikan.',
    'Password reset token was invalid or expired': 'Token reset tidak valid atau kedaluwarsa',
    'Price is required': 'Harga wajib diisi',
    'Profile not found': 'Profil tidak ditemukan',
    'Goods Items': 'Item Barang',
    'Hello Team': 'Halo Tim',
    'Hello': 'Halo',
    'Here is the quotation update with status': 'Berikut update quotation dengan status',
    'No': 'No',
    'No items': 'Tidak ada item',
    'Quotation Number': 'Nomor Quotation',
    'Status': 'Status',
    'Company': 'Perusahaan',
    'Project': 'Proyek',
    'PIC': 'PIC',
    'Email PIC': 'Email PIC',
    'PIC Phone': 'Telepon PIC',
    'Payment Time': 'Waktu Pembayaran',
    'Total': 'Total',
    'Tax': 'PPN',
    'Grand Total': 'Grand Total',
    'RFQ': 'RFQ',
    'Name': 'Nama',
    'Unit': 'Unit',
    'Qty': 'Qty',
    'Price': 'Harga',
    'Delivery Time (days)': 'Waktu Pengiriman (hari)',
    'User': 'Pengguna',
    'Quotation': 'Penawaran',
    'Quotation Information': 'Informasi Quotation',
    'Submitted by': 'Diajukan oleh',
    'Waiting': 'Menunggu',
    'Negotiation': 'Negosiasi',
    'Renegotiation': 'Renegosiasi',
    'Rejected': 'Ditolak',
    'Processed': 'Diproses',
    'Approved': 'Disetujui',
    'Thank you.': 'Terima kasih.',
    'Record not found': 'Data tidak ditemukan',
    'Request failed': 'Permintaan gagal',
    'Reset password token is invalid or expired': 'Token reset tidak valid atau kedaluwarsa',
    'Reset token is invalid or expired': 'Token reset tidak valid atau kedaluwarsa',
    'Reset token is invalid or expired.': 'Token reset tidak valid atau kedaluwarsa.',
    'Reset token is required and password is required': 'Token reset dan password wajib diisi',
    'Reset token is required.': 'Token reset wajib diisi.',
    'Reset token not found': 'Token reset tidak ditemukan',
    'Reset token was not found': 'Token reset tidak ditemukan',
    'SMTP configuration missing': 'Konfigurasi SMTP tidak lengkap',
    'Supplier not found': 'Supplier tidak ditemukan',
    'Table not found': 'Tabel tidak ditemukan',
    'Token and password are required': 'Token dan password wajib diisi',
    'Unauthorized': 'Tidak berwenang',
    'User not found': 'Pengguna tidak ditemukan',
    'User reset password via email link': 'Pengguna mereset password melalui tautan email',
    'Username or password is required.': 'Username atau password wajib diisi.',
  },
  english: {},
};

export const getRequestLanguage = (req) => {
  const headerValue = req?.headers?.['x-language'] || req?.headers?.['accept-language'] || '';
  if (typeof headerValue === 'string') {
    const normalized = headerValue.toLowerCase();
    if (normalized.includes('id') || normalized.includes('indonesia')) {
      return 'indonesia';
    }
  }
  return 'english';
};

export const t = (language, key, params) => {
  const dictionary = translations[language] || translations.english;
  const template = dictionary[key] || key;
  if (!params) return template;
  return Object.entries(params).reduce(
    (result, [token, value]) => result.replaceAll(`{${token}}`, String(value)),
    template
  );
};
